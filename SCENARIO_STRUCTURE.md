# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —á–∞—Ç-–±–æ—Ç–æ–≤

## –§–æ—Ä–º–∞—Ç JSON —Å—Ü–µ–Ω–∞—Ä–∏—è

```json
{
  "id": "balance-check-001",
  "name": "–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∫–∞—Ä—Ç—ã", 
  "version": "1.0",
  "language": "uk",
  "start_node": "greeting",
  "nodes": [
    {
      "id": "greeting",
      "type": "announce",
      "parameters": {
        "message": "–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É –≤–∞–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã.",
        "delay": 500
      },
      "next_nodes": ["ask_card_check"]
    },
    {
      "id": "ask_card_check", 
      "type": "ask",
      "parameters": {
        "question": "–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã? (–¥–∞/–Ω–µ—Ç)",
        "inputType": "text",
        "required": true
      },
      "next_nodes": ["parse_answer"]
    },
    {
      "id": "parse_answer",
      "type": "parse", 
      "parameters": {
        "script": "context.wantsBalance = input.toLowerCase().includes('–¥–∞')"
      },
      "next_nodes": ["check_answer"],
      "conditions": {
        "error": "ask_card_check"
      }
    },
    {
      "id": "check_answer",
      "type": "condition",
      "parameters": {
        "condition": "context.wantsBalance == true"
      },
      "conditions": {
        "true": "ask_card_number",
        "false": "goodbye"
      }
    }
  ],
  "context": {
    "wantsBalance": false,
    "cardNumber": null
  }
}
```

## –¢–∏–ø—ã –±–ª–æ–∫–æ–≤ (nodes)

### 1. **announce** - –û–±—ä—è–≤–ª–µ–Ω–∏–µ/—Å–æ–æ–±—â–µ–Ω–∏–µ
```json
{
  "id": "greeting",
  "type": "announce", 
  "parameters": {
    "message": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
    "delay": 1000
  },
  "next_nodes": ["next_step"]
}
```

### 2. **ask** - –ó–∞–ø—Ä–æ—Å –≤–≤–æ–¥–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```json
{
  "id": "ask_name",
  "type": "ask",
  "parameters": {
    "question": "–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?",
    "inputType": "text",
    "required": true
  },
  "next_nodes": ["parse_name"]
}
```

### 3. **parse** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
```json
{
  "id": "parse_card",
  "type": "parse",
  "parameters": {
    "script": "context.cardNumber = input; context.validCard = /^\\d{4}$/.test(input);"
  },
  "next_nodes": ["validate_card"],
  "conditions": {
    "error": "ask_card_number"
  }
}
```

### 4. **condition** - –£—Å–ª–æ–≤–Ω–æ–µ –≤–µ—Ç–≤–ª–µ–Ω–∏–µ
```json
{
  "id": "check_balance_request",
  "type": "condition",
  "parameters": {
    "condition": "context.wantsBalance == true"
  },
  "conditions": {
    "true": "ask_card_number",
    "false": "goodbye"
  }
}
```

### 5. **wait** - –ü–∞—É–∑–∞
```json
{
  "id": "wait_processing",
  "type": "wait",
  "parameters": {
    "duration": 2000
  },
  "next_nodes": ["show_result"]
}
```

## –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∫–∞—Ä—Ç—ã

**–®–∞–≥ 1: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ**
- üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü—Ä–∏–≤–µ—Ç"
- ü§ñ –ë–æ—Ç: "–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É –≤–∞–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã."

**–®–∞–≥ 2: –ó–∞–ø—Ä–æ—Å –¥–µ–π—Å—Ç–≤–∏—è**
- ü§ñ –ë–æ—Ç: "–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã? (–¥–∞/–Ω–µ—Ç)"
- üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–î–∞"

**–®–∞–≥ 3: –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã**
- ü§ñ –ë–æ—Ç: "–í–≤–µ–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã –∫–∞—Ä—Ç—ã:"
- üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "1234"

**–®–∞–≥ 4: –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**
- ü§ñ –ë–æ—Ç: "–ë–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã ****1234: 15,250.50 –≥—Ä–Ω. –°–ø–∞—Å–∏–±–æ –∑–∞ –æ–±—Ä–∞—â–µ–Ω–∏–µ!"

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å (–ù–ï–¢):**
- üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ù–µ—Ç"
- ü§ñ –ë–æ—Ç: "–•–æ—Ä–æ—à–æ, –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–º–æ—â—å - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å!"

## –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ü–µ–Ω–∞—Ä–∏—è

–ö–æ–Ω—Ç–µ–∫—Å—Ç —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞:

```json
{
  "context": {
    "userName": null,
    "wantsBalance": false,
    "cardNumber": null,
    "validCard": false,
    "currentStep": "greeting"
  }
}
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:

```json
{
  "parameters": {
    "message": "–ü—Ä–∏–≤–µ—Ç, {context.userName}! –ë–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã ****{context.cardNumber}: 15,250.50 –≥—Ä–Ω."
  }
}
```

## –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞

### –¢–∏–ø—ã –≤–≤–æ–¥–∞:
- `text` - –ª—é–±–æ–π —Ç–µ–∫—Å—Ç
- `number` - —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
- `email` - email –∞–¥—Ä–µ—Å
- `phone` - –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### –£—Å–ª–æ–≤–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ 4 —Ü–∏—Ñ—Ä—ã
context.validCard = /^\\d{4}$/.test(input);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–∏–µ
context.wantsBalance = input.toLowerCase().includes('–¥–∞') || 
                      input.toLowerCase().includes('yes');
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```json
{
  "id": "parse_card",
  "type": "parse",
  "conditions": {
    "error": "ask_card_number"  // –í–æ–∑–≤—Ä–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —à–∞–≥—É –ø—Ä–∏ –æ—à–∏–±–∫–µ
  }
}
```

## –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è

```json
{
  "id": "end",
  "type": "announce",
  "parameters": {
    "message": "–î–æ —Å–≤–∏–¥–∞–Ω–∏—è!"
  },
  "next_nodes": []  // –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ = –∫–æ–Ω–µ—Ü —Å—Ü–µ–Ω–∞—Ä–∏—è
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Orchestrator

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏—è —á–µ—Ä–µ–∑ Orchestrator:

```bash
curl -X POST http://localhost:8092/api/v1/execute/scenario \
  -H "Content-Type: application/json" \
  -d '{
    "scenario": { /* JSON —Å—Ü–µ–Ω–∞—Ä–∏—è */ },
    "user_input": "–ü—Ä–∏–≤–µ—Ç",
    "context": {}
  }'
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–ß–µ—Ç–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã**: –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –æ–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ü—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –≤–æ–∑–≤—Ä–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–∏–º —à–∞–≥–∞–º
4. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø—É—Ç–∏**: –£—á–∏—Ç—ã–≤–∞–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–µ–∂–¥—É —à–∞–≥–∞–º–∏
6. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ**: –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞
