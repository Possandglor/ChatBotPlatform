# üéØ –ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã

## üî• **–ö–†–ò–¢–ò–ß–ù–û (–±–µ–∑ —ç—Ç–æ–≥–æ –Ω–µ production)**

### 1. **NLU –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫** ‚è±Ô∏è 2 —á–∞—Å–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: NLU Service —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–µ –≤—Å—Ç—Ä–æ–µ–Ω –≤ Orchestrator
```
–°–µ–π—á–∞—Å: User ‚Üí Gateway ‚Üí Orchestrator ‚Üí –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞
–ù—É–∂–Ω–æ: User ‚Üí Gateway ‚Üí Orchestrator ‚Üí NLU ‚Üí –≤—ã–±–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è
```

### 2. **PostgreSQL –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤** ‚è±Ô∏è 1 –¥–µ–Ω—å
**–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ü–µ–Ω–∞—Ä–∏–∏ –≤ –ø–∞–º—è—Ç–∏, —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
```sql
CREATE TABLE scenarios (
    id VARCHAR(255) PRIMARY KEY,
    scenario_data JSONB NOT NULL
);
```

### 3. **–ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏** ‚è±Ô∏è 1 –¥–µ–Ω—å
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∏–∑ –æ–¥–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è –≤ –¥—Ä—É–≥–æ–π
```java
// –ù—É–∂–Ω–æ: ScenarioTransitionService
String nextScenario = findTransition(currentScenario, intent, entities);
```

### 4. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞** ‚è±Ô∏è 2 —á–∞—Å–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: AuthorizationFilter –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```java
// –°–µ–π—á–∞—Å: return; // –æ—Ç–∫–ª—é—á–µ–Ω–æ
// –ù—É–∂–Ω–æ: —Ä–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ PowerStone + Chameleon
```

## ‚ö° **–í–ê–ñ–ù–û (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)**

### 5. **Mock API —Å–µ—Ä–≤–∏—Å—ã** ‚è±Ô∏è 2 –¥–Ω—è
**–ü—Ä–æ–±–ª–µ–º–∞**: API –≤—ã–∑–æ–≤—ã –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö - –∑–∞–≥–ª—É—à–∫–∏
```
–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å:
- Bank API (8094): –±–∞–ª–∞–Ω—Å, –ø–µ—Ä–µ–≤–æ–¥—ã, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- CRM Service (8095): –∑–∞—è–≤–∫–∏, –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- Notification Service (8096): SMS, Email
```

### 6. **–ù–æ–≤—ã–π —Ç–∏–ø —É–∑–ª–∞: nlu-request** ‚è±Ô∏è 4 —á–∞—Å–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –í —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –Ω–µ—Ç —É–∑–ª–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞ NLU
```json
{
  "type": "nlu-request",
  "parameters": {
    "text": "{user_input}",
    "context": "{session_context}"
  },
  "conditions": {
    "success": "route_by_intent"
  }
}
```

### 7. **Redis –¥–ª—è —Å–µ—Å—Å–∏–π** ‚è±Ô∏è 4 —á–∞—Å–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –°–µ—Å—Å–∏–∏ –≤ –ø–∞–º—è—Ç–∏ Chat Service
```java
// –°–µ–π—á–∞—Å: ConcurrentHashMap
// –ù—É–∂–Ω–æ: Redis –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
```

### 8. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** ‚è±Ô∏è 4 —á–∞—Å–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
```java
// –ù—É–∂–Ω–æ: GlobalExceptionHandler –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
// –ù—É–∂–Ω–æ: Circuit breaker –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤
```

## üìÖ **–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û (—É–ª—É—á—à–µ–Ω–∏—è)**

### 9. **Frontend** ‚è±Ô∏è 1 –Ω–µ–¥–µ–ª—è
**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–æ–ª—å–∫–æ API, –Ω–µ—Ç UI
```
React 19.1.1 + TypeScript:
- –ß–∞—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ê–¥–º–∏–Ω–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏–∞–ª–æ–≥–æ–≤
```

### 10. **WebSocket** ‚è±Ô∏è 1 –¥–µ–Ω—å
**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–æ–ª—å–∫–æ HTTP, –Ω–µ—Ç real-time
```java
@ServerEndpoint("/chat/{sessionId}")
public class ChatWebSocket {
    // Real-time —Å–æ–æ–±—â–µ–Ω–∏—è
}
```

### 11. **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚è±Ô∏è 2 –¥–Ω—è
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç visibility –≤ —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã
```
Prometheus + Grafana:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
- –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
```

### 12. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚è±Ô∏è 2 –¥–Ω—è
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤
```java
@QuarkusTest
public class ChatFlowTest {
    // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–∏–∞–ª–æ–≥–æ–≤
}
```

## üéØ **–ü–†–ò–û–†–ò–¢–ò–ó–ê–¶–ò–Ø –ü–û –í–†–ï–ú–ï–ù–ò**

### **–°–µ–≥–æ–¥–Ω—è (4 —á–∞—Å–∞):**
1. ‚úÖ NLU –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Orchestrator
2. ‚úÖ –ù–æ–≤—ã–π —Ç–∏–ø —É–∑–ª–∞ nlu-request
3. ‚úÖ –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

### **–ó–∞–≤—Ç—Ä–∞ (1 –¥–µ–Ω—å):**
4. ‚úÖ PostgreSQL –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
5. ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏

### **–ü–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞ (1 –¥–µ–Ω—å):**
6. ‚úÖ Redis –¥–ª—è —Å–µ—Å—Å–∏–π
7. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### **–ù–∞ –Ω–µ–¥–µ–ª–µ (2-3 –¥–Ω—è):**
8. ‚úÖ Mock API —Å–µ—Ä–≤–∏—Å—ã
9. ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### **–ß–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é (1 –Ω–µ–¥–µ–ª—è):**
10. ‚úÖ Frontend
11. ‚úÖ WebSocket
12. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìä **–¢–ï–ö–£–©–ê–Ø –ì–û–¢–û–í–ù–û–°–¢–¨**

```
–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 80%

‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:        100% - –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–∏:           90%  - –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è, –Ω—É–∂–Ω—ã –ø–µ—Ä–µ—Ö–æ–¥—ã  
‚úÖ –î–∏–∞–ª–æ–≥–∏:            85%  - —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω—É–∂–µ–Ω NLU
‚ö†Ô∏è –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:    20%  - —Ç–æ–ª—å–∫–æ in-memory
‚ö†Ô∏è API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:     30%  - –∑–∞–≥–ª—É—à–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
‚ùå Frontend:           0%   - —Ç–æ–ª—å–∫–æ API
‚ùå –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:         0%   - –Ω–µ—Ç –º–µ—Ç—Ä–∏–∫
```

## üöÄ **–ú–ò–ù–ò–ú–ê–õ–¨–ù–û –ñ–ò–ó–ù–ï–°–ü–û–°–û–ë–ù–´–ô –ü–†–û–î–£–ö–¢ (MVP)**

### **–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è MVP (2 –¥–Ω—è —Ä–∞–±–æ—Ç—ã):**
1. NLU –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚úÖ
2. PostgreSQL —Å—Ü–µ–Ω–∞—Ä–∏–∏ ‚úÖ  
3. –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ ‚úÖ
4. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚úÖ

### **–ü–æ—Å–ª–µ MVP –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:**
- –ü–æ–ª–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ —Å NLU –∞–Ω–∞–ª–∏–∑–æ–º
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤ –ë–î
- –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

## üí° **–°–ê–ú–´–ï –ö–†–ò–¢–ò–ß–ù–´–ï –ü–†–û–ë–ï–õ–´**

### **1. NLU –Ω–µ –≤—Å—Ç—Ä–æ–µ–Ω (–ë–õ–û–ö–ï–†)**
–°–µ–π—á–∞—Å NLU —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ –¥–∏–∞–ª–æ–≥–æ–≤.

### **2. –ù–µ—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (–ë–õ–û–ö–ï–†)**  
–í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ - –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –≤—Å–µ —Ç–µ—Ä—è–µ—Ç—Å—è.

### **3. –ù–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ (–ë–õ–û–ö–ï–†)**
–ö–∞–∂–¥—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω, –Ω–µ—Ç –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞.

### **4. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞ (SECURITY RISK)**
–õ—é–±–æ–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏.

## ‚úÖ **–ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô**

**–°–µ–≥–æ–¥–Ω—è**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å NLU –≤ Orchestrator  
**–ó–∞–≤—Ç—Ä–∞**: PostgreSQL + –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏  
**–ü–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞**: Redis + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫  
**–ß–µ—Ä–µ–∑ 3 –¥–Ω—è**: MVP –≥–æ—Ç–æ–≤ –¥–ª—è production!

**–í—ã–≤–æ–¥**: –ù—É–∂–Ω–æ 2-3 –¥–Ω—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –ø–æ—Ç–æ–º —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.
